<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <!-- Patch the PaymentPage template to add GoLocalLink payment UI -->
    <t t-name="pos_self_order.PaymentPage" t-inherit="pos_self_order.PaymentPage" t-inherit-mode="extension">

        <!-- Add GoLocalLink payment status display -->
        <xpath expr="//div[@class='payment-state-container d-flex flex-column gap-4 align-items-center justify-content-center w-50 mx-auto p-3']" position="replace">
            <!-- Show GoLocalLink payment status when payment is in progress -->
            <div t-if="useGoLocalLink and !state.selection"
                 class="payment-state-container d-flex flex-column gap-4 align-items-center justify-content-center w-75 mx-auto p-3">
                <GoLocalLinkPaymentStatus
                    status="golocalLinkPayment.paymentStatus"
                    onCancel="() => this.onCancelPayment()"
                    onForceDone="() => this.onForceCheckStatus()" />
            </div>

            <!-- Show default payment state if not using GoLocalLink -->
            <div t-else=""
                 class="payment-state-container d-flex flex-column gap-4 align-items-center justify-content-center w-50 mx-auto p-3">
                <h1 class="mb-3 text-center">Follow instructions on the terminal</h1>
                <div class="btn btn-light btn-lg w-100 py-5 border border-light shadow-sm">
                    <i class="fa fa-credit-card-alt fa-3x" aria-hidden="true"></i>
                </div>
            </div>
        </xpath>

    </t>
</templates>
